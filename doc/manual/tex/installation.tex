% This file is part of xrayutilities.
%
% xrayutilities is free software; you can redistribute it and/or modify 
% it under the terms of the GNU General Public License as published by 
% the Free Software Foundation; either version 2 of the License, or 
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program; if not, see <http://www.gnu.org/licenses/>.
%
% Copyright (C) 2009 Eugen Wintersberger <eugen.wintersberger@desy.de>
% Copyright (C) 2009-2010,2012 Dominik Kriegner <dominik.kriegner@aol.at>

%%%installation notes

Installing {\tt xrutils} is a two steps process
\begin{enumerate}
\item install required C libraries and Python modules
\item build and install the {\tt xrutils} C library and Python module
\end{enumerate}
All steps are described in detail in this chapter. The package can be installed on Linux, Mac OS X and Microsoft Windows, however it is only tested on Linux/Unix platforms. Due to the lack of an package manager the installation on MS Windows platforms is cumbersome (see notes below). Please inform one of the authors in case the installation fails!

\section{Required third party software}
To keep the coding effort as small as possible {\tt xrutils} depends on a 
large number of third party libraries and Python modules. 

The needed dependencies are: 
\begin{description}
\item[GCC] Gnu Compiler Collection or an compatible C compiler. On windows you most probably should use MinGW or CygWin.
\item[HDF5] a versatile binary data format (library is implemented in C).
Although the library is not called directly, it is needed by the pytables Python
module (see below).
\item[Python] the scripting language in which most of {\tt xrutils} code is written in.
\item[Latex] a typesetting system used to write the documentation of the package (optionally)
\item[git] a version control system used to keep track on the {\tt xrayutilities} development. (only needed for development)
\end{description}

Additionally, the following Python modules are needed in order to make 
{\tt xrutils} work as intended
\begin{description}
\item[Scons] a pythonic autotools/make replacement used for building the C library.
\item[Numpy] a Python module providing numerical array objects
\item[Scipy] a Python module providing standard numerical routines, which is heavily using numpy arrays
\item[Python-Tables] a powerful Python interface to HDF5. On windows you need to install numexpr as PyTables depends on this package.
\item[Matplotlib] a Python module for high quality 1D and 2D plotting (optionally)
\item[IPython] although not a dependency of {\tt xrutils} the IPython shell is perfectly suited for the interactive use of the {\tt xrutils} python package.
\end{description}
After installing all required packages you can continue with installing and
building the C library.

\section{Building and installing the library and python package}

{\tt xrutils} uses the SCons build system to compile the C components of the
system. You can build the library simply by typing 
\begin{verbatim}
 >scons
\end{verbatim}
in the root directory of the source distribution. To build using debug flags ({\tt -g -O0}) type
\begin{verbatim}
 >scons debug=1
\end{verbatim}
instead. After building, the library and python package are installed by
\begin{verbatim}
 >scons install --prefix=<install path>
\end{verbatim}
The library is installed in {\tt<install path>/lib}. Installation of the Python module 
is done via the {\tt distutils} package (called by scons automatically).
The --prefix option sets the root directory for the installation. If it is omitted
the libary is installed under /usr/lib/ on Unix systems.

The documentation can be built with 
\begin{verbatim}
 >scons doc
\end{verbatim}
which creates this file under {\tt doc/manual/}.

\section{Setup of the Python package}

You need to make your Python installation aware of where to look for the module.
This is usually only needed when installing in non-standard {\tt<install path>} locations.
For this case append the installation directory to your {\tt PYTHONPATH} environment variable by 
\begin{verbatim}
 >export PYTHONPATH=$PYTHONPATH:<local install path>/lib64/python2.7/site-packages
\end{verbatim}
on a Unix/Linux terminal. Or, to make this configuration persistent append this line to
your local {\tt .bashrc} file in your home directory. 
On MS Windows you would like to create a environment variable in the 
system preferences under system in the advanced tab.
Be sure to use the correct directory which might be similar to 
\begin{verbatim}
<local install path>/Lib/site-packages
\end{verbatim}
on Windows systems.

\section{Notes for installing on Windows}

Since there is no packages manager on Windows the packages need to be installed manual 
(including all the dependecies) or a pre-packed solution needs to be used. We strongly suggest to
use the pyhton(x,y) python distribution, which includes already most of the needed dependencies for installing
xrayutilities.

When using python(x,y) you only have to install scons in addition, all other dependencies are available as plugins to python(x,y) 
and are installed by default anyhow. The setup of the environment variables is also done by the python(x,y) installation.
One can proceed with the installation of xrutils directly!

In case you want to do it the hard way install all of the following (versions in brackets indicate the tested set of 
versions by the author (2.3.2012)):

\begin{itemize}
\item MinGW (0.4$\alpha$)
\item Python (2.7.2)
\item scons (2.1.0)
\item numpy (1.6.1)
\item scipy (0.10.1)
\item numexpr (1.4.2) needed for pytables
\item pytables (2.3.1)
\item matplotlib (1.1.0)
\item ipython (0.12)
\end{itemize}

It is suggested to add the MinGW binary directory, as well as the Python and Python-scripts directory
to the Path environment variable as described above! Installation is done as described above. 
In the simplest case (installation to default directories) this is done by:

\begin{verbatim}
> scons install
\end{verbatim}

